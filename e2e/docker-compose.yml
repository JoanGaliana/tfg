version: '3'
services:
  web:
    build: 
      context: ../front
      args:
        API_URL: http://localhost:8080
    image: front
    container_name: front
    restart: always
    environment: 
      API_URL: "ABC"
    ports:
      - "3000:80"
  back:
    build: ../back
    image: back
    container_name: back
    restart: always
    ports:
      - "8080:8080"
  # e2e:
  #   build: ./e2e
  #   depends_on:
  #     - web
  #   # note: inside e2e container, the network allows accessing
  #   # "web" host under name "web"
  #   # so "curl http://web" would return whatever the webserver
  #   # in the "web" container is cooking
  #   # see https://docs.docker.com/compose/networking/
  #   environment:
  #     - CYPRESS_baseUrl=http://web
  #   command: npx cypress run
  #   # mount the host directory e2e/cypress and the file e2e/cypress.json as
  #   # volumes within the container
  #   # this means that:
  #   #  1. anything that Cypress writes to these folders (e.g., screenshots,
  #   #     videos) appears also on the Docker host's filesystem
  #   #  2. any change that the developer applies to Cypress files on the host
  #   #     machine immediately takes effect within the e2e container (no docker
  #   #     rebuild required).
  #   volumes:
  #     - ./e2e/cypress:/app/cypress
  #     - ./e2e/cypress.json:/app/cypress.json